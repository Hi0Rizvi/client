log "bird/logs/bird.log" all;
debug protocols all;

table rtup;
table igptable;

template bgp peering {
	local as 47065;
	allow local as 3;
	table rtup;
	igp table igptable;
	add paths rx;
	import all;
}


protocol bgp seattle01 from peering {
	neighbor 100.126.0.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_seattle01_224.conf";
		include "export_seattle01_225.conf";
		include "export_seattle01_226.conf";
		include "export_seattle01_227.conf";
		include "export_seattle01_228.conf";
		include "export_seattle01_229.conf";
		include "export_seattle01_230.conf";
		include "export_seattle01_231.conf";
		include "export_seattle01_232.conf";
		include "export_seattle01_233.conf";
		include "export_seattle01_234.conf";
		include "export_seattle01_235.conf";
		include "export_seattle01_236.conf";
		include "export_seattle01_237.conf";
		include "export_seattle01_238.conf";
		include "export_seattle01_239.conf";
		include "export_seattle01_240.conf";
		include "export_seattle01_241.conf";
		include "export_seattle01_242.conf";
		include "export_seattle01_243.conf";
		include "export_seattle01_244.conf";
		include "export_seattle01_245.conf";
		include "export_seattle01_246.conf";
		include "export_seattle01_247.conf";
		include "export_seattle01_248.conf";
		include "export_seattle01_249.conf";
		include "export_seattle01_250.conf";
		include "export_seattle01_251.conf";
		include "export_seattle01_252.conf";
		include "export_seattle01_253.conf";
		include "export_seattle01_254.conf";
		include "export_seattle01_255.conf";
	};
}

protocol bgp isi01 from peering {
	neighbor 100.126.1.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_isi01_224.conf";
		include "export_isi01_225.conf";
		include "export_isi01_226.conf";
		include "export_isi01_227.conf";
		include "export_isi01_228.conf";
		include "export_isi01_229.conf";
		include "export_isi01_230.conf";
		include "export_isi01_231.conf";
		include "export_isi01_232.conf";
		include "export_isi01_233.conf";
		include "export_isi01_234.conf";
		include "export_isi01_235.conf";
		include "export_isi01_236.conf";
		include "export_isi01_237.conf";
		include "export_isi01_238.conf";
		include "export_isi01_239.conf";
		include "export_isi01_240.conf";
		include "export_isi01_241.conf";
		include "export_isi01_242.conf";
		include "export_isi01_243.conf";
		include "export_isi01_244.conf";
		include "export_isi01_245.conf";
		include "export_isi01_246.conf";
		include "export_isi01_247.conf";
		include "export_isi01_248.conf";
		include "export_isi01_249.conf";
		include "export_isi01_250.conf";
		include "export_isi01_251.conf";
		include "export_isi01_252.conf";
		include "export_isi01_253.conf";
		include "export_isi01_254.conf";
		include "export_isi01_255.conf";
	};
}

protocol bgp cornell01 from peering {
	neighbor 100.126.2.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_cornell01_224.conf";
		include "export_cornell01_225.conf";
		include "export_cornell01_226.conf";
		include "export_cornell01_227.conf";
		include "export_cornell01_228.conf";
		include "export_cornell01_229.conf";
		include "export_cornell01_230.conf";
		include "export_cornell01_231.conf";
		include "export_cornell01_232.conf";
		include "export_cornell01_233.conf";
		include "export_cornell01_234.conf";
		include "export_cornell01_235.conf";
		include "export_cornell01_236.conf";
		include "export_cornell01_237.conf";
		include "export_cornell01_238.conf";
		include "export_cornell01_239.conf";
		include "export_cornell01_240.conf";
		include "export_cornell01_241.conf";
		include "export_cornell01_242.conf";
		include "export_cornell01_243.conf";
		include "export_cornell01_244.conf";
		include "export_cornell01_245.conf";
		include "export_cornell01_246.conf";
		include "export_cornell01_247.conf";
		include "export_cornell01_248.conf";
		include "export_cornell01_249.conf";
		include "export_cornell01_250.conf";
		include "export_cornell01_251.conf";
		include "export_cornell01_252.conf";
		include "export_cornell01_253.conf";
		include "export_cornell01_254.conf";
		include "export_cornell01_255.conf";
	};
}

protocol bgp phoenix01 from peering {
	neighbor 100.126.3.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_phoenix01_224.conf";
		include "export_phoenix01_225.conf";
		include "export_phoenix01_226.conf";
		include "export_phoenix01_227.conf";
		include "export_phoenix01_228.conf";
		include "export_phoenix01_229.conf";
		include "export_phoenix01_230.conf";
		include "export_phoenix01_231.conf";
		include "export_phoenix01_232.conf";
		include "export_phoenix01_233.conf";
		include "export_phoenix01_234.conf";
		include "export_phoenix01_235.conf";
		include "export_phoenix01_236.conf";
		include "export_phoenix01_237.conf";
		include "export_phoenix01_238.conf";
		include "export_phoenix01_239.conf";
		include "export_phoenix01_240.conf";
		include "export_phoenix01_241.conf";
		include "export_phoenix01_242.conf";
		include "export_phoenix01_243.conf";
		include "export_phoenix01_244.conf";
		include "export_phoenix01_245.conf";
		include "export_phoenix01_246.conf";
		include "export_phoenix01_247.conf";
		include "export_phoenix01_248.conf";
		include "export_phoenix01_249.conf";
		include "export_phoenix01_250.conf";
		include "export_phoenix01_251.conf";
		include "export_phoenix01_252.conf";
		include "export_phoenix01_253.conf";
		include "export_phoenix01_254.conf";
		include "export_phoenix01_255.conf";
	};
}

protocol bgp amsterdam01 from peering {
	neighbor 100.126.4.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_amsterdam01_224.conf";
		include "export_amsterdam01_225.conf";
		include "export_amsterdam01_226.conf";
		include "export_amsterdam01_227.conf";
		include "export_amsterdam01_228.conf";
		include "export_amsterdam01_229.conf";
		include "export_amsterdam01_230.conf";
		include "export_amsterdam01_231.conf";
		include "export_amsterdam01_232.conf";
		include "export_amsterdam01_233.conf";
		include "export_amsterdam01_234.conf";
		include "export_amsterdam01_235.conf";
		include "export_amsterdam01_236.conf";
		include "export_amsterdam01_237.conf";
		include "export_amsterdam01_238.conf";
		include "export_amsterdam01_239.conf";
		include "export_amsterdam01_240.conf";
		include "export_amsterdam01_241.conf";
		include "export_amsterdam01_242.conf";
		include "export_amsterdam01_243.conf";
		include "export_amsterdam01_244.conf";
		include "export_amsterdam01_245.conf";
		include "export_amsterdam01_246.conf";
		include "export_amsterdam01_247.conf";
		include "export_amsterdam01_248.conf";
		include "export_amsterdam01_249.conf";
		include "export_amsterdam01_250.conf";
		include "export_amsterdam01_251.conf";
		include "export_amsterdam01_252.conf";
		include "export_amsterdam01_253.conf";
		include "export_amsterdam01_254.conf";
		include "export_amsterdam01_255.conf";
	};
}

protocol bgp gatech01 from peering {
	neighbor 100.126.5.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_gatech01_224.conf";
		include "export_gatech01_225.conf";
		include "export_gatech01_226.conf";
		include "export_gatech01_227.conf";
		include "export_gatech01_228.conf";
		include "export_gatech01_229.conf";
		include "export_gatech01_230.conf";
		include "export_gatech01_231.conf";
		include "export_gatech01_232.conf";
		include "export_gatech01_233.conf";
		include "export_gatech01_234.conf";
		include "export_gatech01_235.conf";
		include "export_gatech01_236.conf";
		include "export_gatech01_237.conf";
		include "export_gatech01_238.conf";
		include "export_gatech01_239.conf";
		include "export_gatech01_240.conf";
		include "export_gatech01_241.conf";
		include "export_gatech01_242.conf";
		include "export_gatech01_243.conf";
		include "export_gatech01_244.conf";
		include "export_gatech01_245.conf";
		include "export_gatech01_246.conf";
		include "export_gatech01_247.conf";
		include "export_gatech01_248.conf";
		include "export_gatech01_249.conf";
		include "export_gatech01_250.conf";
		include "export_gatech01_251.conf";
		include "export_gatech01_252.conf";
		include "export_gatech01_253.conf";
		include "export_gatech01_254.conf";
		include "export_gatech01_255.conf";
	};
}

protocol bgp ufmg01 from peering {
	neighbor 100.126.6.1 as 47065;
	export filter {
		if ! ( net ~ [ 184.164.224.0/19{19,24} ] ) then { reject; }
		if ( bgp_path.len > 5 ) then { reject; }
		include "export_ufmg01_224.conf";
		include "export_ufmg01_225.conf";
		include "export_ufmg01_226.conf";
		include "export_ufmg01_227.conf";
		include "export_ufmg01_228.conf";
		include "export_ufmg01_229.conf";
		include "export_ufmg01_230.conf";
		include "export_ufmg01_231.conf";
		include "export_ufmg01_232.conf";
		include "export_ufmg01_233.conf";
		include "export_ufmg01_234.conf";
		include "export_ufmg01_235.conf";
		include "export_ufmg01_236.conf";
		include "export_ufmg01_237.conf";
		include "export_ufmg01_238.conf";
		include "export_ufmg01_239.conf";
		include "export_ufmg01_240.conf";
		include "export_ufmg01_241.conf";
		include "export_ufmg01_242.conf";
		include "export_ufmg01_243.conf";
		include "export_ufmg01_244.conf";
		include "export_ufmg01_245.conf";
		include "export_ufmg01_246.conf";
		include "export_ufmg01_247.conf";
		include "export_ufmg01_248.conf";
		include "export_ufmg01_249.conf";
		include "export_ufmg01_250.conf";
		include "export_ufmg01_251.conf";
		include "export_ufmg01_252.conf";
		include "export_ufmg01_253.conf";
		include "export_ufmg01_254.conf";
		include "export_ufmg01_255.conf";
	};
}


protocol static {
	table rtup;
	route 184.164.224.0/24 via "lo";
	route 184.164.225.0/24 via "lo";
	route 184.164.226.0/24 via "lo";
	route 184.164.227.0/24 via "lo";
	route 184.164.228.0/24 via "lo";
	route 184.164.229.0/24 via "lo";
	route 184.164.230.0/24 via "lo";
	route 184.164.231.0/24 via "lo";
	route 184.164.232.0/24 via "lo";
	route 184.164.233.0/24 via "lo";
	route 184.164.234.0/24 via "lo";
	route 184.164.235.0/24 via "lo";
	route 184.164.236.0/24 via "lo";
	route 184.164.237.0/24 via "lo";
	route 184.164.238.0/24 via "lo";
	route 184.164.239.0/24 via "lo";
	route 184.164.240.0/24 via "lo";
	route 184.164.241.0/24 via "lo";
	route 184.164.242.0/24 via "lo";
	route 184.164.243.0/24 via "lo";
	route 184.164.244.0/24 via "lo";
	route 184.164.245.0/24 via "lo";
	route 184.164.246.0/24 via "lo";
	route 184.164.247.0/24 via "lo";
	route 184.164.248.0/24 via "lo";
	route 184.164.249.0/24 via "lo";
	route 184.164.250.0/24 via "lo";
	route 184.164.251.0/24 via "lo";
	route 184.164.252.0/24 via "lo";
	route 184.164.253.0/24 via "lo";
	route 184.164.254.0/24 via "lo";
	route 184.164.255.0/24 via "lo";
}

protocol device {
	scan time 10;
}

protocol direct {
	table igptable;
	interface "tap*";
}
